---
description: 
globs: 
alwaysApply: false
---
# MCPå®˜æ–¹åº“å¼€å‘ - Cursor Rules

## é¡¹ç›®ç»“æž„
ä½¿ç”¨æ ‡å‡†MCPé¡¹ç›®ç»“æž„ï¼ŒFastMCPä¸ºä¸»è¦æ¡†æž¶ï¼š
```
project/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ server.py          # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ config.json            # MCPé…ç½®
â”œâ”€â”€ test_server.py         # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ README.md              # æ–‡æ¡£
â””â”€â”€ pyproject.toml         # ä¾èµ–ç®¡ç†
```

## æ ¸å¿ƒå¼€å‘æ¨¡å¼

### 1. æœåŠ¡å™¨åˆå§‹åŒ–
```python
from mcp.server.fastmcp import FastMCP

# åˆ›å»ºæœåŠ¡å™¨å®žä¾‹
mcp = FastMCP("æœåŠ¡å™¨åç§°")

# è¿è¡ŒæœåŠ¡å™¨
if __name__ == "__main__":
    mcp.run()
```

### 2. å·¥å…·å®šä¹‰æ ‡å‡†
```python
@mcp.tool()
def tool_name(param1: str, param2: bool = False) -> dict:
    """å·¥å…·æè¿°
    
    Args:
        param1: å‚æ•°1æè¿°
        param2: å‚æ•°2æè¿°ï¼Œé»˜è®¤False
    """
    try:
        # ä¸šåŠ¡é€»è¾‘
        result = process_data(param1, param2)
        return {
            "success": True,
            "data": result,
            "message": "æ“ä½œæˆåŠŸ"
        }
    except Exception as e:
        return {
            "success": False,
            "error": str(e)
        }
```

### 3. èµ„æºå®šä¹‰
```python
@mcp.resource("uri://pattern/{param}")
def resource_name(param: str) -> str:
    """èµ„æºæè¿°"""
    return f"èµ„æºå†…å®¹: {param}"
```

### 4. æç¤ºå®šä¹‰
```python
@mcp.prompt()
def prompt_name(input_text: str) -> str:
    """æç¤ºæè¿°"""
    return f"å¤„ç†æç¤º: {input_text}"
```

## å¼€å‘åŽŸåˆ™

### ä»£ç è§„èŒƒ
- å‡½æ•°å‘½åï¼šsnake_case
- ç±»åž‹æ³¨è§£ï¼šå¿…é¡»æä¾›
- æ–‡æ¡£å­—ç¬¦ä¸²ï¼šæè¿°+å‚æ•°è¯´æ˜Ž
- é”™è¯¯å¤„ç†ï¼šç»Ÿä¸€è¿”å›žæ ¼å¼

### å“åº”æ ¼å¼
ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹å“åº”æ ¼å¼ï¼š
```python
# æˆåŠŸå“åº”
{
    "success": True,
    "data": {...},          # å¯é€‰
    "message": "æè¿°"       # å¯é€‰
}

# é”™è¯¯å“åº”
{
    "success": False,
    "error": "é”™è¯¯æè¿°"
}
```

### å‚æ•°å¤„ç†
- å¿…éœ€å‚æ•°ï¼šä¸æä¾›é»˜è®¤å€¼
- å¯é€‰å‚æ•°ï¼šæä¾›åˆç†é»˜è®¤å€¼
- ç±»åž‹éªŒè¯ï¼šä¾èµ–FastMCPè‡ªåŠ¨å¤„ç†
- å‚æ•°æ–‡æ¡£ï¼šåœ¨docstringä¸­è¯¦ç»†è¯´æ˜Ž

## æµ‹è¯•è§„èŒƒ

### æµ‹è¯•è„šæœ¬æ¨¡æ¿
```python
#!/usr/bin/env python3
import subprocess
import sys
import time

def test_mcp_server():
    """æµ‹è¯•MCPæœåŠ¡å™¨"""
    print("ðŸ§ª å¼€å§‹æµ‹è¯•MCPæœåŠ¡å™¨...")
    
    process = subprocess.Popen([
        sys.executable, "src/server.py"
    ], stdin=subprocess.PIPE, stdout=subprocess.PIPE, 
      stderr=subprocess.PIPE, text=True)
    
    try:
        time.sleep(2)
        if process.poll() is None:
            print("âœ… æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ")
            time.sleep(3)
            return True
        else:
            print("âŒ æœåŠ¡å™¨å¯åŠ¨å¤±è´¥")
            return False
    finally:
        process.terminate()
        process.wait(timeout=3)

if __name__ == "__main__":
    success = test_mcp_server()
    sys.exit(0 if success else 1)
```

## é…ç½®ç®¡ç†

### MCPé…ç½®æ–‡ä»¶
```json
{
  "mcpServers": {
    "server-name": {
      "command": "python",
      "args": ["path/to/server.py"],
      "env": {
        "KEY": "value"
      }
    }
  }
}
```

### ä¾èµ–ç®¡ç†
```toml
[project]
name = "mcp-server-name"
version = "1.0.0"
dependencies = [
    "mcp>=1.9.0"
]

[project.optional-dependencies]
dev = ["pytest", "black", "mypy"]

```